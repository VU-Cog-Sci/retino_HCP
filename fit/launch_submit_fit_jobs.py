"""
-----------------------------------------------------------------------------------------
launch_submit_fit_jobs.py
-----------------------------------------------------------------------------------------
Goal of the script:
run pp_roi codes for each subjects of hcp dataset
-----------------------------------------------------------------------------------------
Input(s):
sys.argv[1]: fit model ('gauss','css')
-----------------------------------------------------------------------------------------
Output(s):
None
-----------------------------------------------------------------------------------------
To run:
python fit/launch_submit_fit_jobs.py gauss
-----------------------------------------------------------------------------------------
"""

# Stop warnings
# -------------
import warnings
warnings.filterwarnings("ignore")

# General imports
# ---------------
import os
import sys
import json
import ipdb
opj = os.path.join
deb = ipdb.set_trace

# Define analysis parameters
# --------------------------
with open('settings.json') as f:
    json_s = f.read()
    analysis_info = json.loads(json_s)

fit_model = sys.argv[1]
num_vox = 5000
dur_fit = 20

# 000-010/ "192641", "105923", "111312", "926862", "182739", "167440", "789373", "690152", "148133", "467351", DONE
# 010-020/ "233326", "144226", "638049", "318637", "165436", "771354", "995174", "463040", "187345", "547046", DONE
# 020-030/ "150423", "167036", "104416", "536647", "397760", "552241", "169040", "973770", "116726", "130114", DONE
# 030-040/ "135124", "181636", "177746", "239136", "205220", "200614", "185442", "131722", "406836", "732243", DONE
# 040-050/ "178142", "412528", "146129", "134829", "114823", "140117", "818859", "429040", "191336", "157336", DONE
# 050-060/ "169747", "814649", "171633", "214019", "901139", "680957", "751550", "905147", "178647", "352738", DONE
# 060-070/ "195041", "971160", "191033", "330324", "927359", "320826", "654552", "158035", "115017", "249947", DONE
# 070-080/ "601127", "617748", "102311", "861456", "155938", "346137", "156334", "100610", "283543", "145834", DONE
# 080-090/ "783462", "164131", "671855", "257845", "196144", "108323", "872764", "137128", "585256", "181232", DONE
# 090-100/ "126426", "193845", "825048", "198653", "393247", "901442", "724446", "942658", "164636", "209228", DONE
# 100-110/ "214524", "263436", "177140", "389357", "102816", "572045", "859671", "118225", "782561", "833249", DONE
# 110-120/ "951457", "381038", "180533", "899885", "201515", "146432", "200210", "182436", "725751", "146937", DONE
# 120-130/ "197348", "360030", "203418", "146735", "966975", "191841", "757764", "246133", "706040", "186949", DONE
# 130-140/ "380036", "204521", "128935", "826353", "212419", "943862", "395756", "134627", "172130", "765864", DONE
# 140-150/ "541943", "159239", "898176", "175237", "385046", "192439", "176542", "581450", "878877", "878776", DONE
# 150-160/ "199655", "958976", "644246", "770352", "173334", "111514", "436845", "910241", "401422", "162935", DONE
# 160-170/ "550439", "169343", "627549", "221319", "871762", "109123", "158136", "125525", "525541", "573249", DONE
# 170-180/ "251833", "562345", "130518", "200311", "177645", "131217", "178243", "115825", "132118", "169444",
# 180-181/ "365343"

subs = analysis_info['subject_list']

# Subject to analyse
# ------------------
index_start = 0
index_end = 182
for subject in subs[index_start:index_end]:
    
    os.system("python fit/submit_fit_jobs.py {subject} {fit_model} {num_vox} {dur_fit}".format(subject = subject, 
                                                                                               fit_model = fit_model, 
                                                                                               num_vox = num_vox, 
                                                                                               dur_fit = dur_fit))
    